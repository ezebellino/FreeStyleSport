;/*FB_PKG_DELIM*/

__d("useWeightedScrollSpeedRef.react",["VirtualizationContainerContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useEffect,k=10;e=typeof WeakMap==="function"?WeakMap:Map;var l=new e(),m=new e();function a(a){a===void 0&&(a=null);var b=i(c("VirtualizationContainerContext")),d=typeof a==="function"?a():b==null?void 0:(a=b.rootElementRef)==null?void 0:a.current,e=(b=d)!=null?b:window,f=(a=m.get(e))!=null?a:{lastScrollY:0,lastTime:Date.now(),speedHistory:[],weightedSpeed:0};m.set(e,f);j(function(){if(!l.has(e)){var a=function(){var a,b=f.lastScrollY,c=f.lastTime,g=f.speedHistory;a=(a=e===window?window.scrollY:d==null?void 0:d.scrollTop)!=null?a:0;var h=Date.now();b=a-b;c=h-c;if(c>0&&b>0&&c>0){b=Math.abs(b/(c/1e3));g.push({speed:b});g.length>k&&g.shift()}f.lastScrollY=a;f.lastTime=h;var i=0,j=0;g.forEach(function(a,b){a=a.speed;b=b+1;i+=a*b;j+=b});f.weightedSpeed=j>0?i/j:0};e.addEventListener("scroll",a);l.set(e,{handleScroll:a,subscribers:0})}var b=l.get(e);b&&b.subscribers++;return function(){b&&--b.subscribers===0&&(e.removeEventListener("scroll",b.handleScroll),l["delete"](e),m["delete"](e))}},[e,f,d]);return f}g["default"]=a}),98);
__d("useDynamicVirtualizationMargin.react",["ExecutionEnvironment","VirtualizationContainerContext","justknobx","react","useDebouncedComet","useWeightedScrollSpeedRef.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");var j=b.useContext,k=b.useEffect,l=b.useRef,m=b.useState,n=c("justknobx")._("3655")/10,o=c("justknobx")._("3656"),p=c("justknobx")._("3657"),q=c("justknobx")._("3658"),r=c("justknobx")._("3659");function s(a,b){return a.bottom===b.bottom&&a.left===b.left&&a.right===b.right&&a.top===b.top}function a(a,b,d,e){d===void 0&&(d=!1);e===void 0&&(e=null);a=m({bottom:b,left:a,right:a,top:b});var f=a[0],g=a[1],i=l(0),t=c("useWeightedScrollSpeedRef.react")(e),u=j(c("VirtualizationContainerContext"));function v(a){a=a();var c=a>i.current;i.current=a;g(function(a){var e=window.innerHeight,f=t.weightedSpeed;f=f===0?1:f/r;f=q*f;var g=d?1:n,h=d?n:1;g=Math.min(b*g,e);h=Math.min(b*h,e);e=e/p;var i=null;c?i=babelHelpers["extends"]({},a,{bottom:Math.min(h,a.bottom+f),top:Math.min(g,Math.max(e,a.top-f))}):i=babelHelpers["extends"]({},a,{bottom:Math.min(h,Math.max(e,a.bottom-f)),top:Math.min(g,a.top+f)});return s(a,i)?a:i})}var w=c("useDebouncedComet")(v,{wait:o});k(function(){var a=typeof e==="function"?e():u==null?void 0:u.rootElementRef.current,b=!a,d=b?window:a;if(!(h||(h=c("ExecutionEnvironment"))).canUseDOM||typeof window==="undefined")return;function f(){var c=b?window.scrollY:a==null?void 0:a.scrollTop;return(c=c)!=null?c:0}function g(){w(f)}d==null?void 0:d.addEventListener("scroll",g,{passive:!0});return function(){d==null?void 0:d.removeEventListener("scroll",g,{passive:!0})}},[e,u==null?void 0:u.rootElementRef,w]);return f}g["default"]=a}),98);
__d("CometVirtualizationSmart.react",["BaseView.react","HiddenSubtreeContextProvider.react","HiddenSubtreePassiveContext","VirtualizationConfig","VirtualizationContainerContext","VirtualizationContext","gkx","intersectionObserverEntryIsIntersecting","justknobx","nullIntersectionObserverEntryLogger","react","stylex","unrecoverableViolation","useDynamicVirtualizationMargin.react","useIntersectionObserver","useMergeRefs","usePrevious","useTimeoutStateSinceFirstMounting.react","useVirtualizationContext"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));e=i;var aa=e.useCallback,k=e.useContext,l=e.useEffect,m=e.useRef,n=e.useState,o=function(){var a=null;return function(){if(a===null){var b;b=(b=document)==null?void 0:b.documentElement;if(b==null)throw c("unrecoverableViolation")("Scroll anchoring feature detection called in an environment without a documentElement","comet_infra");a=b.style.overflowAnchor!=null}return a}}();function ba(a){a===void 0&&(a=null);a=n(a);var b=a[0],c=a[1];l(function(){b===null&&c(function(){return o()})},[b]);return(a=b)!=null?a:!1}var p={invisible:{display:"x1s85apg",$$css:!0},resetBlockFormattingContext:{display:"x78zum5",flexDirection:"xdt5ytf",$$css:!0}},q=c("justknobx")._("1003");function r(a){return typeof a.replace==="function"?a.replace(/\n/g," ").replace(/\s+/g," "):""}function a(){if(typeof IntersectionObserver!=="function")return!1;return typeof IntersectionObserver.toString!=="function"?!1:r(IntersectionObserver.toString()).endsWith("{ [native code] }")}var ca=a();e=j.forwardRef(b);function b(a,b){var e,f,g=arguments,i,o,r,s=a.children,t=a.deferVirtualizationInMs,da=t===void 0?0:t,ea=a.disableHiding,u=a.hiddenMode,v=u===void 0?"none":u,w=a.initialRenderConfig,x=w===void 0?d("VirtualizationConfig").DEFAULT_INIT_RENDER_CONFIG:w,y=a.isInfiniteScrollUp,fa=y===void 0?!1:y,z=a.leftRightMargin,A=z===void 0?d("VirtualizationConfig").HORIZONTAL_HIDEABLE_MARGIN:z,ga=a.mountXStyle,ha=a.pinChildrenOnInteraction,ia=a.pinChildrenWithPlayer,B=a.pinHeight,C=a.scrollport,D=C===void 0?null:C,E=a.smartMargin,ja=E===void 0?!0:E,F=a.testid,ka=F===void 0?"hideable":F,G=a.topBottomMargin,H=G===void 0?d("VirtualizationConfig").VERTICAL_HIDEABLE_MARGIN:G,I=a.unmountHiddenChildren,la=a.unmountXStyle,J=a.xstyle,ma=m(null),K=m(null),na=k(c("HiddenSubtreePassiveContext")),L=n(!1),M=L[0],oa=L[1],N=m(!0),O=n(x.isVisible),P=O[0],Q=O[1],R=n(x.nodeHeight),S=R[0],T=R[1],pa=c("usePrevious")(P),qa=c("useTimeoutStateSinceFirstMounting.react")(da),U=c("useVirtualizationContext")(),V=k(c("VirtualizationContainerContext")),ra=(e=ga)!=null?e:J,sa=(f=la)!=null?f:J;l(function(){N.current&&(N.current=!1)},[]);l(function(){var a=N.current||S==null&&!P;K.current!=null&&a&&T(K.current.getBoundingClientRect().height)},[P,S,pa]);var ta=function(b){c("nullIntersectionObserverEntryLogger")(b,"IntersectionObserverEntry is null. num_arguments="+g.length);var a=na.getCurrentState().hiddenOrBackgrounded_FIXME;if(c("intersectionObserverEntryIsIntersecting")(b))T(function(a){return B===!0?a:null}),Q(!0);else if(!a){b=(a=b==null?void 0:b.boundingClientRect)!=null?a:{};a=b.height;b=b.width;a>0&&b>0&&Q(!1)}},ua={bottom:H,left:A,right:A,top:H},va=c("useDynamicVirtualizationMargin.react")(A,H,fa,D),W=ja?va:ua,wa=aa(function(){var a=D!=null?D==null?void 0:D():V==null?void 0:V.rootElementRef.current;return a instanceof Element?a:null},[D,V]),xa=c("useIntersectionObserver")(ta,{root:wa,rootMargin:babelHelpers["extends"]({},W),scrollMargin:babelHelpers["extends"]({},W),threshold:0}),ya=c("useMergeRefs")(xa,ma,b),za=function(){if(!M&&(B===!0||!P)&&S!==null&&I!==!1)return{minHeight:S}}(),X=!P&&S!==null,Aa=ba((i=x.hasScrollAnchoring)!=null?i:null),Ba=Aa?ya:b;if(c("gkx")("22947"))return j.jsx("div",babelHelpers["extends"]({className:"x78zum5 xdt5ytf"},{children:j.jsx(c("BaseView.react"),{children:s})}));var Y=function(){ha===!0&&oa(!0)},Ca=((o=ia)!=null?o:!1)&&U.hasFlag("HAS_PLAYER"),Z=ca&&q&&I===!0&&X&&!M&&!U.hasPin()&&!Ca&&qa,$=q&&!((r=ea)!=null?r:!1)&&X&&v!=="none";return j.jsx(c("VirtualizationContext").Provider,{value:U,children:j.jsx("div",{className:(h||(h=c("stylex")))(p.resetBlockFormattingContext,Z?sa:ra),"data-testid":void 0,"data-virtualized":Z,onClickCapture:Y,onFocusCapture:Y,onKeyPressCapture:Y,ref:Ba,style:za,children:v==="legacy"?j.jsx(c("BaseView.react"),{hidden:$,ref:K,xstyle:$&&p.invisible,children:Z?null:j.jsx(c("HiddenSubtreeContextProvider.react"),{isHidden:$,children:s})}):j.jsx("div",{ref:K,children:Z?null:s})})})}b.displayName=b.name+" [from "+f.id+"]";a=e;g["default"]=a}),98);